<canvas style=background:red height=300 id=a><script>c=a.getContext("2d");c.f=c.fillRect;m=Math;t=V=10;s=[S=[t,t]];x=H=1;y=0;setInterval(()=>(X=S[0]+x,Y=S[1]+y,(X<0|Y<0|X>29|Y>29|s.map(_=>_.join()).includes(X+","+Y))?(s=[S=[t,t]]):(s.unshift(S=[X,Y]),H-X|V-Y?s.pop():([H,V]=S.map(_=>~~(m.random()*30))),c.clearRect(0,0,300,300),[...s,[H,V]].map(r=>c.f(r[0]*t,r[1]*t,t,t)||r))),99);onkeydown=e=>{A=(e.which+1)*m.PI/2;x=~~m.cos(A);y=~~m.sin(A)}</script>